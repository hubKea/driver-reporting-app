<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="icon" href="/favicon.jpg" type="image/jpeg"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet"/>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <title>Download Reports - Driver Reporting System</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Primary Background */
        }
        .header {
            background-color: #1f2937; /* Dark Charcoal Header */
            border-bottom: 1px solid #374151;
        }
        .header-title {
            color: #ffffff;
            font-weight: 700;
        }
        .nav-link {
            color: #d1d5db; /* Lighter text for nav links */
            font-weight: 500;
            transition: color 0.2s;
        }
        .nav-link:hover, .nav-link-active {
            color: #ffffff; /* Brighter on hover/active */
        }
        .card {
            background-color: #ffffff;
            border-radius: 0.75rem; /* rounded-xl */
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.05), 0 1px 2px -1px rgb(0 0 0 / 0.05);
        }
        .btn-primary {
            background-color: #3b82f6; /* Vibrant Blue Accent */
            color: #ffffff;
            font-weight: 600;
            border-radius: 0.5rem; /* rounded-lg */
            padding: 0.625rem 1.25rem;
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background-color: #2563eb;
        }
        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        }
        .form-input:focus {
            outline: 2px solid transparent;
            outline-offset: 2px;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px #bfdbfe;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <header class="shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo/Brand -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-white">Driver Reporting System</h1>
                    </div>
                </div>

                <!-- Desktop Navigation -->
                <nav class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="/index.html" class="px-3 py-2 rounded-md text-sm font-medium text-white transition-colors duration-200">
                            Dashboard
                        </a>
                        <a href="/report_breakdown.html" class="px-3 py-2 rounded-md text-sm font-medium text-white transition-colors duration-200">
                            Report Breakdown
                        </a>
                        <a href="/request_break.html" class="px-3 py-2 rounded-md text-sm font-medium text-white transition-colors duration-200">
                            Request Break
                        </a>
                        <a href="/breakdown_reports.html" class="px-3 py-2 rounded-md text-sm font-medium text-white transition-colors duration-200">
                            Breakdown Reports
                        </a>
                        <a href="/break_requests.html" class="px-3 py-2 rounded-md text-sm font-medium text-white transition-colors duration-200">
                            Break Requests
                        </a>
                    </div>
                </nav>

                <!-- User Role Indicator -->
                <div class="hidden md:block">
                    <div class="ml-4 flex items-center md:ml-6">
                        <div class="px-3 py-1 rounded-full text-xs font-medium bg-blue-700 text-white">
                            <span id="userRole">Driver</span>
                        </div>
                    </div>
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden">
                   <button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-white transition-colors duration-200" style="background-color: #2563EB;" onmouseover="this.style.backgroundColor='#1E40AF'" onmouseout="this.style.backgroundColor='#2563EB'" aria-controls="mobile-menu" aria-expanded="false" onclick="toggleMobileMenu()">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile menu -->
        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3" style="background-color: #1E40AF;">
                <a href="/index.html" class="block px-3 py-2 rounded-md text-base font-medium text-white transition-colors duration-200" style="font-family: 'Inter', sans-serif; font-weight: 500;" onmouseover="this.style.backgroundColor='#1E3A8A'" onmouseout="this.style.backgroundColor='transparent'">
                    Dashboard
                </a>
                <a href="/report_breakdown.html" class="block px-3 py-2 rounded-md text-base font-medium text-white transition-colors duration-200" style="font-family: 'Inter', sans-serif; font-weight: 500;" onmouseover="this.style.backgroundColor='#1E3A8A'" onmouseout="this.style.backgroundColor='transparent'">
                    Report Breakdown
                </a>
                <a href="/request_break.html" class="block px-3 py-2 rounded-md text-base font-medium text-white transition-colors duration-200" style="font-family: 'Inter', sans-serif; font-weight: 500;" onmouseover="this.style.backgroundColor='#1E3A8A'" onmouseout="this.style.backgroundColor='transparent'">
                    Request Break
                </a>
                <a href="/breakdown_reports.html" class="block px-3 py-2 rounded-md text-base font-medium text-white transition-colors duration-200" style="font-family: 'Inter', sans-serif; font-weight: 500;" onmouseover="this.style.backgroundColor='#1E3A8A'" onmouseout="this.style.backgroundColor='transparent'">
                    Breakdown Reports
                </a>
                <a href="/break_requests.html" class="block px-3 py-2 rounded-md text-base font-medium text-white transition-colors duration-200" style="font-family: 'Inter', sans-serif; font-weight: 500;" onmouseover="this.style.backgroundColor='#1E3A8A'" onmouseout="this.style.backgroundColor='transparent'">
                    Break Requests
                </a>
                <div class="border-t pt-4 pb-3" style="border-color: #2563EB;">
                    <div class="px-3">
                        <div class="text-xs font-medium" style="color: #BFDBFE; font-family: 'Inter', sans-serif; font-weight: 500;">Role: <span id="mobileUserRole">Driver</span></div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
        <div class="px-4 py-6 sm:px-0">
            <!-- Page Header -->
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-slate-800 mb-2">Download Reports</h1>
                <p class="text-slate-600">Generate and download reports for breakdown incidents and break requests with customizable date filtering.</p>
            </div>

            <!-- Filter and Download Card -->
            <div class="bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6">
                <h2 class="text-xl font-semibold text-slate-800 mb-6">Report Filters &amp; Download Options</h2>
                
                <form id="downloadForm" class="space-y-6">
                    <!-- Report Type Selection -->
                    <div>
                        <label for="reportType" class="block text-sm font-medium text-slate-700 mb-2">Report Type</label>
                        <select id="reportType" name="reportType" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="breakdown">Breakdown Reports</option>
                            <option value="break_request">Break Requests</option>
                        </select>
                    </div>

                    <!-- Date Range Filters -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="startDate" class="block text-sm font-medium text-slate-700 mb-2">Start Date</label>
                            <input type="date" id="startDate" name="startDate" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/>
                        </div>
                        <div>
                            <label for="endDate" class="block text-sm font-medium text-slate-700 mb-2">End Date</label>
                            <input type="date" id="endDate" name="endDate" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/>
                        </div>
                    </div>

                    <!-- Time Range Filters -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="startTime" class="block text-sm font-medium text-slate-700 mb-2">Start Time</label>
                            <input type="time" id="startTime" name="startTime" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/>
                        </div>
                        <div>
                            <label for="endTime" class="block text-sm font-medium text-slate-700 mb-2">End Time</label>
                            <input type="time" id="endTime" name="endTime" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/>
                        </div>
                    </div>

                    <!-- Download Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 pt-4">
                        <button type="button" id="downloadCSV" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            <svg class="w-5 h-5 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            Download CSV Report
                        </button>
                        <button type="button" id="downloadPDF" class="flex-1 bg-slate-600 hover:bg-slate-700 text-white font-semibold py-3 px-6 rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2">
                            <svg class="w-5 h-5 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                            </svg>
                            Download PDF Report
                        </button>
                    </div>
                </form>
            </div>

            <!-- Status Messages -->
            <div id="statusMessage" class="hidden mb-6">
                <!-- Success Message -->
                <div id="successMessage" class="hidden bg-green-50 border border-green-200 rounded-md p-4">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-green-800" id="successText">Report downloaded successfully!</p>
                        </div>
                    </div>
                </div>

                <!-- Error Message -->
                <div id="errorMessage" class="hidden bg-red-50 border border-red-200 rounded-md p-4">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="h-5 w-5 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-red-800" id="errorText">Failed to download report. Please try again.</p>
                        </div>
                    </div>
                </div>

                <!-- Loading Message -->
                <div id="loadingMessage" class="hidden bg-blue-50 border border-blue-200 rounded-md p-4">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <svg class="animate-spin h-5 w-5 text-blue-400" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-blue-800">Generating report, please wait...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Report Preview Card -->
            <div class="bg-white rounded-lg shadow-sm border border-slate-200 p-6">
                <h2 class="text-xl font-semibold text-slate-800 mb-4">Report Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-slate-50 rounded-lg p-4">
                        <h3 class="text-sm font-medium text-slate-600 mb-1">Available Formats</h3>
                        <p class="text-lg font-semibold text-slate-800">CSV, PDF</p>
                    </div>
                    <div class="bg-slate-50 rounded-lg p-4">
                        <h3 class="text-sm font-medium text-slate-600 mb-1">Data Source</h3>
                        <p class="text-lg font-semibold text-slate-800">Fleet Database</p>
                    </div>
                    <div class="bg-slate-50 rounded-lg p-4">
                        <h3 class="text-sm font-medium text-slate-600 mb-1">Update Frequency</h3>
                        <p class="text-lg font-semibold text-slate-800">Real-time</p>
                    </div>
                </div>
                
                <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                    <h3 class="text-sm font-medium text-blue-800 mb-2">Report Contents</h3>
                    <div id="reportContents" class="text-sm text-blue-700">
                        <p><strong>Breakdown Reports include:</strong> Report ID, User ID, Truck Number, Location, Issue Description, Submission Date, Status, Notes, Resolution Notes</p>
                        <p class="mt-2"><strong>Break Requests include:</strong> Request ID, User ID, Break Type, Duration, Submission Date, Notes</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }
    </script>

    <script type="module">
        import ClientAPI from '/client.js';
        
        const client = new ClientAPI();
        
        // Initialize page
        window.addEventListener('DOMContentLoaded', async function() {
            await initializePage();
            setupEventListeners();
            loadQueryParameters();
        });

        async function initializePage() {
            try {
                const user = await client.getCurrentStormAuthUser();
                if (user) {
                    // Determine user role based on user data or set default
                    const userRole = determineUserRole(user);
                    document.getElementById('userRole').textContent = userRole;
                    document.getElementById('mobileUserRole').textContent = userRole;
                }
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        function determineUserRole(user) {
            // This is a simplified role determination
            // In a real application, this would be based on user permissions or role data
            return 'Driver';
        }

        function loadQueryParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const startDate = urlParams.get('start_date');
            const endDate = urlParams.get('end_date');
            
            if (startDate) {
                const date = new Date(parseInt(startDate) * 1000);
                document.getElementById('startDate').value = date.toISOString().split('T')[0];
            }
            
            if (endDate) {
                const date = new Date(parseInt(endDate) * 1000);
                document.getElementById('endDate').value = date.toISOString().split('T')[0];
            }
        }

        function setupEventListeners() {
            document.getElementById('downloadCSV').addEventListener('click', () => downloadReport('csv'));
            document.getElementById('downloadPDF').addEventListener('click', () => downloadReport('pdf'));
            
            // Update report contents when report type changes
            document.getElementById('reportType').addEventListener('change', updateReportContents);
        }

        function updateReportContents() {
            const reportType = document.getElementById('reportType').value;
            const contentsDiv = document.getElementById('reportContents');
            
            if (reportType === 'breakdown') {
                contentsDiv.innerHTML = '<p><strong>Breakdown Reports include:</strong> Report ID, User ID, Truck Number, Location, Issue Description, Submission Date, Status, Notes, Resolution Notes</p>';
            } else {
                contentsDiv.innerHTML = '<p><strong>Break Requests include:</strong> Request ID, User ID, Break Type, Duration, Submission Date, Notes</p>';
            }
        }

        async function downloadReport(format) {
            const reportType = document.getElementById('reportType').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const startTime = document.getElementById('startTime').value;
            const endTime = document.getElementById('endTime').value;

            // Show loading message
            showMessage('loading');

            try {
                let startTimestamp, endTimestamp;

                // Convert dates to Unix timestamps
                if (startDate) {
                    const startDateTime = new Date(startDate + (startTime ? 'T' + startTime : 'T00:00:00'));
                    startTimestamp = Math.floor(startDateTime.getTime() / 1000);
                }

                if (endDate) {
                    const endDateTime = new Date(endDate + (endTime ? 'T' + endTime : 'T23:59:59'));
                    endTimestamp = Math.floor(endDateTime.getTime() / 1000);
                }

                if (format === 'csv') {
                    // Download CSV using API
                    const csvData = await client.downloadReports(reportType, startTimestamp, endTimestamp);
                    downloadCSVFile(csvData, reportType);
                } else if (format === 'pdf') {
                    // Generate PDF using jsPDF
                    await generatePDFReport(reportType, startTimestamp, endTimestamp);
                }

                showMessage('success', 'Report downloaded successfully!');
            } catch (error) {
                console.error('Error downloading report:', error);
                showMessage('error', 'Failed to download report. Please try again.');
            }
        }

        function downloadCSVFile(base64Data, reportType) {
            try {
                // Decode base64 data
                const csvContent = atob(base64Data);
                
                // Create blob and download
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                
                link.setAttribute('href', url);
                link.setAttribute('download', `${reportType}_report_${new Date().toISOString().split('T')[0]}.csv`);
                link.style.visibility = 'hidden';
                
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } catch (error) {
                console.error('Error processing CSV data:', error);
                throw new Error('Failed to process CSV data');
            }
        }

        async function generatePDFReport(reportType, startTimestamp, endTimestamp) {
            try {
                // Fetch data for PDF generation
                let data;
                if (reportType === 'breakdown') {
                    const response = await client.getBreakdownReports(startTimestamp, endTimestamp);
                    data = response.breakdown_reports || [];
                } else {
                    const response = await client.getBreakRequests(startTimestamp, endTimestamp);
                    data = response.break_requests || [];
                }

                // Generate PDF using jsPDF
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Add title
                doc.setFontSize(20);
                doc.text(`${reportType === 'breakdown' ? 'Breakdown' : 'Break Request'} Report`, 20, 30);
                
                // Add date range
                doc.setFontSize(12);
                let dateRange = 'All Time';
                if (startTimestamp || endTimestamp) {
                    const startDate = startTimestamp ? new Date(startTimestamp * 1000).toLocaleDateString() : 'Beginning';
                    const endDate = endTimestamp ? new Date(endTimestamp * 1000).toLocaleDateString() : 'Present';
                    dateRange = `${startDate} - ${endDate}`;
                }
                doc.text(`Date Range: ${dateRange}`, 20, 45);
                doc.text(`Generated: ${new Date().toLocaleString()}`, 20, 55);
                
                // Add data
                let yPosition = 75;
                doc.setFontSize(10);
                
                if (data.length === 0) {
                    doc.text('No data found for the selected criteria.', 20, yPosition);
                } else {
                    data.forEach((item, index) => {
                        if (yPosition > 270) {
                            doc.addPage();
                            yPosition = 20;
                        }
                        
                        if (reportType === 'breakdown') {
                            doc.text(`${index + 1}. Truck: ${item.truck_number || 'N/A'}`, 20, yPosition);
                            doc.text(`   Location: ${item.breakdown_location || 'N/A'}`, 20, yPosition + 10);
                            doc.text(`   Issue: ${item.issue_description || 'N/A'}`, 20, yPosition + 20);
                            doc.text(`   Status: ${item.status || 'N/A'}`, 20, yPosition + 30);
                            doc.text(`   Date: ${item.submission_date ? new Date(item.submission_date * 1000).toLocaleString() : 'N/A'}`, 20, yPosition + 40);
                            yPosition += 55;
                        } else {
                            doc.text(`${index + 1}. Type: ${item.break_type || 'N/A'}`, 20, yPosition);
                            doc.text(`   Duration: ${item.break_duration || 'N/A'} minutes`, 20, yPosition + 10);
                            doc.text(`   Date: ${item.submission_date ? new Date(item.submission_date * 1000).toLocaleString() : 'N/A'}`, 20, yPosition + 20);
                            doc.text(`   Notes: ${item.notes || 'N/A'}`, 20, yPosition + 30);
                            yPosition += 45;
                        }
                    });
                }
                
                // Save PDF
                doc.save(`${reportType}_report_${new Date().toISOString().split('T')[0]}.pdf`);
            } catch (error) {
                console.error('Error generating PDF:', error);
                throw new Error('Failed to generate PDF report');
            }
        }

        function showMessage(type, text = '') {
            // Hide all messages first
            document.getElementById('statusMessage').classList.add('hidden');
            document.getElementById('successMessage').classList.add('hidden');
            document.getElementById('errorMessage').classList.add('hidden');
            document.getElementById('loadingMessage').classList.add('hidden');

            // Show the appropriate message
            if (type === 'success') {
                document.getElementById('successText').textContent = text;
                document.getElementById('successMessage').classList.remove('hidden');
                document.getElementById('statusMessage').classList.remove('hidden');
                
                // Auto-hide success message after 5 seconds
                setTimeout(() => {
                    document.getElementById('statusMessage').classList.add('hidden');
                }, 5000);
            } else if (type === 'error') {
                document.getElementById('errorText').textContent = text;
                document.getElementById('errorMessage').classList.remove('hidden');
                document.getElementById('statusMessage').classList.remove('hidden');
            } else if (type === 'loading') {
                document.getElementById('loadingMessage').classList.remove('hidden');
                document.getElementById('statusMessage').classList.remove('hidden');
            }
        }
    </script>

</body>
</html>
